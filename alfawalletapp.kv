#:kivy 2.0.0
# Критически важно, чтобы название kv файла не совпадало с walletapp
ScreenManagement:

    LoginPage:
        id: login_page
    UserPage:
        id: user_page

<LoginPage>:
    name: "login_page"

    MDCard:
        size_hint: (0.6, 0.7)
        pos_hint: {"center_x": 0.5, "center_y": 0.5}
        padding_left: self.width * 0.07
        padding_right: self.width * 0.07
        padding_top: self.height * 0.03
        padding_bottom: self.height * 0.03
        orientation: 'vertical'
        MDFloatLayout:
            size: self.parent.size
            Image:
                radius: 24
                box_color: 1, 1, 1, .2
                source: "images/login_page_image.jpg"
                pos_hint: {"center_x": 0.5, "top":1}
                width: root.width * 0.7
                height: self.parent.height * 0.30
                size_hint: (0.842, None)
            MDBoxLayout:
                size: self.parent.parent.size
                orientation: 'vertical'
                pos_hint: {"center_x": 0.5, "center_y": 0.75}
                padding_left: self.width * 0.07
                padding_right: self.width * 0.07
                padding_top: self.height * 0.03
                padding_bottom: self.height * 0.03
                spacing: self.height * 0.03
                MDTextField:
                    id: user
                    mode: "round"
                    hint_text: "username"
                    icon_right: "account"
                    width: self.parent.width * 0.6
                    size_hint_x: None
                    font_size: 18
                    pos_hint: {"center_x": 0.5, "center_y": 0.5}

                MDTextField:
                    id: password
                    mode: "round"
                    hint_text: "password"
                    icon_right: "eye-off"
                    width: self.parent.width * 0.6
                    size_hint_x: None
                    font_size: 18
                    pos_hint: {"center_x": 0.5}
                    password: True

                MDRoundFlatButton:
                    text: "Войти"
                    font_size: 18
                    # width: self.width * 0.4
                    pos_hint: {"center_x": 0.5}
                    text_color: "white"
                    md_bg_color: (239/256, 49/256, 36/256, 1.0)
                    on_press: app.root.current = "user_page"



<UserPage>:
    name: "user_page"
    opacity: 1
    MDBottomNavigation:
        
        MDBottomNavigationItem:
            id: navigation_bottom_1
            name: "screen 1"
            text:
            icon: 'card-multiple-outline'
            disabled: False

            FloatLayout:
                id: screen_1
                MDBoxLayout:
                    id: card_list
                    orientation: 'vertical'
                    padding: [0, 15]
                    spacing: 20
                    disabled: False
                    MDTextField:
                        id: search
                        mode: "round"
                        hint_text: "поиск..."
                        icon_right: "magnify"
                        size_hint_x: 0.7
                        width: root.width
                        font_size: 18
                        pos_hint: {"center_x": 0.5}
                    ScrollView:
                        do_scroll_x: False
                        do_scroll_y: True
                        MDBoxLayout:
                            adaptive_height: True
                            orientation: 'vertical'
                            padding: [0, 15]
                            spacing: 20
                            
                            ElementCard:
                            ElementCard:
                            ElementCard:


        MDBottomNavigationItem:
            id: navigation_bottom_2
            name: "screen 2"
            text:
            icon: 'plus-circle-outline'
            disabled: False
            MDBoxLayout:
                orientation: 'vertical'
                padding: [0, 15]
                spacing: 15
                MDTextField:
                    id: search
                    mode: "round"
                    hint_text: "поиск..."
                    icon_right: "magnify"
                    size_hint_x: None
                    width: 400
                    font_size: 18
                    pos_hint: {"center_x": 0.5}

                MDRoundFlatButton:
                    text: "Добавить карту магазина"
                    size_hint_x: None
                    width: 400
                    font_size: 15
                    pos_hint: {"center_x": 0.5}
                    on_press: app.root.current = "user_page"

                ScrollView:

                    do_scroll_x: False
                    do_scroll_y: True
                    MDBoxLayout:
                        adaptive_height: True
                        orientation: 'vertical'
                        padding: [0, 15]
                        spacing: 5
                        disabled: False
                        ElementShop:
                        ElementShop:
                        ElementShop:
                        


        MDBottomNavigationItem:
            id: navigation_bottom_3
            name: "screen 3"
            text:
            icon: 'account-settings-outline'
            disabled: False
            MDCard:
                size_hint: None, None
                size: 300, 400
                pos_hint: {"center_x": 0.5, "center_y": 0.5}
                elevation: 10
                padding: 25
                spacing: 25
                orientation: 'vertical'
                MDCard:
                    size_hint: None, None
                    size: 150, 100
                    pos_hint: {"center_x": 0.5, "top": 1}



<ElementCard>:
    #md_bg_color:69/255,55/255,86/255,1
    width: root.width
    height: self.parent.parent.height * 0.30
    size_hint: (0.842, None)
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    padding: 25
    spacing: 25
    orientation: 'vertical'
    on_release: self.show_qr()

<QrPage>:
    #md_bg_color:69/255,55/255,86/255,1
    background_color: (1,0,0,.5)
    opacity: 100
    width: root.width
    height: root.height
    size_hint: (0.7, 0.9)
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    padding: 10
    spacing: 25
    orientation: 'vertical'
    on_release: self.hide_qr()
    MDLabel:
        text: "Название магазина"
        width: root.width * 0.5
        height: root.height * 0.03
        pos_hint: {"center_x": 0.5, "center_y": 0.3}
    MDCard:
    MDGridLayout:
        padding: 10
        cols: 2 
        rows: 3
        MDLabel:
            text: "1"
        MDLabel:
            text: "2"
        MDLabel:
            text: "3"
        MDLabel:
            text: "4"
        MDLabel:
            text: "5"
        MDLabel:
            text: "6"

<ElementShop>:
    width: root.width
    height: self.parent.parent.height * 0.10
    size_hint: (0.842, None)
    pos_hint: {"center_x": 0.5, "center_y": 0.5}
    padding: 25
    spacing: 10
    orientation: 'vertical'
    on_release: 